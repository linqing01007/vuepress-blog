(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{424:function(t,s,a){"use strict";a.r(s);var e=a(70),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"es6模块和commonjs模块的差异"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6模块和commonjs模块的差异"}},[t._v("#")]),t._v(" es6模块和CommonJS模块的差异")]),t._v(" "),a("ol",[a("li",[t._v("CommonJS模块输出的是值的拷贝（一旦输出一个值后，模块内部的变化就无法影响已经输出的值），而es6模块输出的是值的引用（不会缓存值，动态取值，且输出的变量是只读的）")]),t._v(" "),a("li",[t._v("CommonJS模块是运行时加载，es6模块是编译时输出接口。\n3CommonJS中的require()是同步加载，es6的import命令是异步加载，有一个独立的模块依赖的解析阶段。")])]),t._v(" "),a("h2",{attrs:{id:"require"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require"}},[t._v("#")]),t._v(" require")]),t._v(" "),a("p",[t._v("require 遵循标准CommonJs/AMD，只能在运行时确定模块的依赖关系以及输入/输出的变量，无法进行静态优化；require是赋值过程，require的结果就是对象、数字、字符串等，再把require的结果赋值个某个变量： "),a("code",[t._v("var a = require('module-name')")]),t._v("，导出用"),a("code",[t._v("module.exports = {}")])]),t._v(" "),a("h3",{attrs:{id:"require原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require原理"}},[t._v("#")]),t._v(" require原理")]),t._v(" "),a("p",[t._v("require一个文件的查找过程，对于以"),a("code",[t._v(".")]),t._v(", "),a("code",[t._v("..")]),t._v(", "),a("code",[t._v("/")]),t._v(" 开头的文件路径，会尝试当作文件/目录来进行匹配，具体过程：")]),t._v(" "),a("ol",[a("li",[t._v("若路径存在且是一个文件，就当作js代码来加载，无论后缀名是什么，"),a("code",[t._v("require(./myModule.abdc)")]),t._v("也可以。")]),t._v(" "),a("li",[t._v("若不存在，则依次尝试拼上"),a("code",[t._v(".js")]),t._v(", "),a("code",[t._v(".json")]),t._v(", "),a("code",[t._v(".node")]),t._v("(Node支持的二进制扩展)后缀名。")]),t._v(" "),a("li",[t._v("如果路径存在并且是个文件夹，就在该目录下找"),a("code",[t._v("package.json")]),t._v("，取其main字段，并加载指定的模块。")]),t._v(" "),a("li",[t._v("如果没有"),a("code",[t._v("package.json")]),t._v("，就依次尝试"),a("code",[t._v("index.js")]),t._v(", "),a("code",[t._v("index.json")]),t._v(", "),a("code",[t._v("index.node")]),t._v("。")])]),t._v(" "),a("p",[t._v("对于模块标识不是路径的，先看看是不是Node.js原生模块，如果不是，就从当前目录开始，逐级往上在各个"),a("code",[t._v("node_modules")]),t._v("下找，一直找到根目录的"),a("code",[t._v("/node_modules")]),t._v("，以及一些全局目录：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("NODE_PATH")]),t._v("环境变量指定的位置")]),t._v(" "),a("li",[t._v("默认的全局目录： "),a("code",[t._v("$HOME/.node_modules")])])]),t._v(" "),a("h3",{attrs:{id:"require循环依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#require循环依赖"}},[t._v("#")]),t._v(" require循环依赖")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// module1.js")]),t._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./module2.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("c "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// module2.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" module "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./module1.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module1 is partially loaded here, '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输出module1 is partially loaded here, {a: 1}")]),t._v("\n")])])]),a("p",[t._v("在Node.js中，只加载了部分的模块也可以正常引用。")]),t._v(" "),a("h2",{attrs:{id:"import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[t._v("#")]),t._v(" import")]),t._v(" "),a("p",[t._v("import是es6标准，以export指令导出接口，以import引入模块，import是解构过程。")]),t._v(" "),a("h3",{attrs:{id:"export-导出模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#export-导出模块"}},[t._v("#")]),t._v(" export 导出模块")]),t._v(" "),a("ol",[a("li",[t._v("命名式导出： export {name1 as name1, name2 as name2 }")]),t._v(" "),a("li",[t._v("默认导出：export default a  等价于 export { a as default }")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出单个特性")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameN "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// also var, const")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameN "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// also var, const")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FunctionName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassName")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出列表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重命名导出")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" variable1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" variable2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解构导出并重命名")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bar "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" o\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认导出")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" expression\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("…")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// also class, function*")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("name1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("…")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" … "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// also class, function*")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" … "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导出模块合集")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" … "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// does not set the default export")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" … "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Draft ECMAScript® 2O21")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" …\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" import1 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" import2 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" …"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nameN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" …\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" …\n\n")])])]),a("h3",{attrs:{id:"import-引入模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#import-引入模块"}},[t._v("#")]),t._v(" import 引入模块")]),t._v(" "),a("p",[t._v("必须放在文件最开始，且前面不允许有其他逻辑代码。")]),t._v(" "),a("ol",[a("li",[t._v("命名式导入：import { name1, name2 } from 'module-name' （与export导出的名称对应）")]),t._v(" "),a("li",[t._v("默认式导入：import a from 'module-name' (a可起任意名字)")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import 动态导入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("module")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[t._v("#")]),t._v(" 区别")]),t._v(" "),a("ol",[a("li",[t._v("require: node和es6都支持的引入")]),t._v(" "),a("li",[t._v("export / import: 只有es6支持的导出引入")]),t._v(" "),a("li",[t._v("module.exports / exports: 只有node支持的导出")])]),t._v(" "),a("h3",{attrs:{id:"module-exports-exports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-exports-exports"}},[t._v("#")]),t._v(" module.exports / exports")]),t._v(" "),a("p",[t._v("exports 是 module.exports 的引用，用于辅助后者添加内容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("exports.a = function () {}\n\n// 等同于\nmodule.exports = {\n  a: function () {}\n}\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);